<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title></title>
	<link href="/Content/bootstrap.css" rel="stylesheet" />
	<link href="/css/blog-home.css" rel="stylesheet" />
	<script>
	(function (i, s, o, g, r, a, m) {
		i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
			(i[r].q = i[r].q || []).push(arguments)
		}, i[r].l = 1 * new Date(); a = s.createElement(o),
		m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
	})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
	ga('create', 'UA-51528307-2', 'auto');
	ga('send', 'pageview');
	</script>
</head>
<body>

	<!-- Navigation -->
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div class="container">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="/Blog/Index.html">Elegance C#</a>
			</div>
			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav">
					<li>
						<a href="/Blog/BlogList0.html">Articles</a>
					</li>
					<li>
						<a href="#">About</a>
					</li>
				</ul>
			</div>
			<!-- /.navbar-collapse -->
		</div>
		<!-- /.container -->
	</nav>

	<!-- Page Content -->
	<div class="container">
		<div class="row">
			<!-- Blog Entries Column -->
			<div class="col-md-8">
				<h1 class="page-header">
					Elegance C#
					<small>Mr-Brain</small>
				</h1>

				

<ul class="list-group">
	<h2>
		<a href="#">##Develop Electron App</a>
	</h2>
	<p><span class="glyphicon glyphicon-time"></span> Posted on 2016/05/28 19:40:16</p>
	<ul>
<li>
<p>Download node.js v4.4.5 LTS msi version from <a href="https://nodejs.org/en/download/">nodejs.org website</a></p>
</li>
<li>
<p>Download python 2.7.1 from <a href="https://www.python.org/downloads/windows/">python.org website</a></p>
<p>set system environment path PYTHON=&quot;C:\Python27\python.exe&quot;</p>
</li>
</ul>
<ul>
<li>
<p>Install <a href="https://www.visualstudio.com/zh-tw/products/visual-studio-community-vs.aspx">Visual Studio Community 2015</a></p>
<p>Visual C++ -&gt;
Visual C++ 2015
Common Windows Application Develop Tool -&gt;
Tool (1.2) &amp; Windows 10 SDK (10.0.10586)
Windows 10 SDK (10.0.10586)</p>
</li>
</ul>
<p>Enter cmd.exe</p>
<pre><code>$npm config set msvs_version 2015 --global

(這樣可避免每次安裝都要下參數 npm install [package name] --msvs_version=2015)

$npm install electron-prebuilt --save
</code></pre>
<p>每次開發新的 Electron App 時, 先建立目錄 C:\sample-app1, 然後到 cmd c:\sample-app1</p>
<pre><code>sample-app1/
	├── package.json
	├── main.js
	├── webpack.config.js
	└── app/
		├── mainWindow.html
		└── mainWindow.jsx
</code></pre>
<ul>
<li>
<p>建立 package.json</p>
<p>{
&quot;name&quot;: &quot;electron-example&quot;,
&quot;version&quot;: &quot;0.1.0&quot;,
&quot;main&quot;: &quot;main.js&quot;
}</p>
</li>
</ul>
<p>註：如果 package.json 沒有指定 main 欄位，Electron 預設會使用 index.js 這個檔案。</p>
<p>main.js
'use strict';</p>
<pre><code>const electron = require('electron');
// app: 控制應用程式生命週期的模組
const app = electron.app;
// BrowserWindow: 建立系統原生視窗 (native window) 的模組
const BrowserWindow = electron.BrowserWindow;

// 保留一個全域的物件關聯以避免 JavaScript 物件 GC 機製造成視窗自動關閉
let mainWindow;

function createWindow () {
	// 建立 browser window
	mainWindow = new BrowserWindow({width: 800, height: 600});

	// 載入 mainWindow.html 作為畫面
	mainWindow.loadURL('file://' + __dirname + '/app/mainWindow.html');

	// 開啟開發者工具
	mainWindow.webContents.openDevTools();

	// 當 browser window 被關閉時，會送出 'closed' 訊號，並執行相關的 callback
	mainWindow.on('closed', function() {
		// 將此 window 物件解除關聯。
		// 如果你的應用程式支援多視窗，通常會將這些物件存在一個陣列裡面。
		// 現在就是刪除對應的視窗物件的時機。
		mainWindow = null;
	});
}

// 當 Electron 完成初始化並且可以開始建立視窗的時候，
// 會發送 'ready' 訊號，並執行對應的 callback
// 我們指定收到 'ready' 訊號時，執行 createWindow()
app.on('ready', createWindow);

// 當所有視窗都關閉時，結束應用程式 ( app.quit() )
app.on('window-all-closed', function () {
	// OS X 的使用習慣是當所有視窗關閉的時候，上方的 menu bar 仍然維持開啟
	// 此時應用程式還沒有完全關閉，除非使用者強制按 Cmd + Q
	if (process.platform !== 'darwin') {
		app.quit();
	}
});

app.on('activate', function () {
	// OS X 通常在應用程式已經起來了，但是所有視窗關閉的時候，還可以重新建立主視窗
	if (mainWindow === null) {
		createWindow();
	}
});
</code></pre>
<p>而 app/mainWindow.html 是你想要在視窗中顯示的內容</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;meta charset=&quot;UTF-8&quot;&gt;
	&lt;title&gt;My Electron-React app&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;div id=&quot;content&quot;&gt;
		Hello World!!
	&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>在 sample-app1 裡面安裝套件 	</p>
<pre><code>$npm install electron-prebuilt
</code></pre>
<p>執行</p>
<pre><code>$ node_modules/.bin/electron .
其中第二個路徑是 package.json 所在的目錄 
</code></pre>
<hr />
<p>執行 webpack 產生新的 app/built/mainWindow.js</p>
<pre><code>$ ./node_modules/.bin/webpack
</code></pre>
<p>Start Run</p>
<pre><code>$ node_modules\.bin\electron .
</code></pre>
<p>為了方便未來容易使用，我們將指令放到 package.json ,</p>
<pre><code>&quot;scripts&quot;: {
	&quot;start&quot;: &quot;./node_modules/.bin/electron ./&quot;,
	&quot;electron-rebuild&quot;: &quot;./node_modules/.bin/electron-rebuild&quot;,
	&quot;webpack&quot;: &quot;./node_modules/.bin/webpack&quot;
}
</code></pre>
<p>之後只需要</p>
<pre><code>$ npm run webpack &amp;&amp; npm start
</code></pre>


</ul>

<!-- Pager -->
<ul class="pager">
		<li class="previous">
			<a href="/Blog/2016/04/integrating-gulp-into-vs-net.html">&larr; Older</a>
		</li>
			<li class="next">
			<a href="/Blog/2016/05/setting-up-visual-studio-code.html">Newer &rarr;</a>
		</li>
</ul>


			</div>


			<!-- Blog Sidebar Widgets Column -->
			<div class="col-md-4">
				<!-- Blog Search Well -->
				<div class="well" id="SearchBox">
					
				</div>

				<!-- Blog Categories Well -->
				

				<!-- Side Widget Well -->
				<div class="well">
					<h4>About Me</h4>
					<p>"Write Less Do More", Elegant code written more representative that people can leave work early.</p>
				</div>
			</div>
		</div>
		<!-- /.row -->
		<hr>
		<!-- Footer -->
		<footer>
			<div class="row">
				<div class="col-lg-12">
					<p>Copyright &copy; Mr-Brain Website 2016</p>
				</div>
				<!-- /.col-lg-12 -->
			</div>
			<!-- /.row -->
		</footer>
	</div>
	<!-- /.container -->
	<script src="/Scripts/jquery-2.1.4.min.js"></script>
	<script src="/Scripts/bootstrap.min.js"></script>
	<script src="/js/requirejs-config.js"></script>
	<script src="/Scripts/require.js" data-main="/js/search/App.js"></script>
	
</body>
</html>
