<h2>React + FReflux</h2>
<h3>React Flow</h3>
<p><img src="/images/Flux.png" alt="React Flow" /></p>
<h4>Create Actions</h4>
<pre><code>import $ = require('jquery');
import t1 = require('t1');
import FReflux = t1.FReflux;
import FRefluxActions = t1.FRefluxActions;

enum Demo1ActionType {
	Request
}

export class Demo1Actions extends FRefluxActions&lt;Demo1ActionType&gt; {
	constructor() {
		super(Demo1ActionType);
	}

	Request(name: string) {
		this.dispatchEvent(Demo1ActionType.Request, name);
	}
}
</code></pre>
<h4>Create Store</h4>
<pre><code>import t1 = require('t1');
import FReflux = t1.FReflux;
import FRefluxStore = t1.FRefluxStore;

export class Demo1State {
	name: string;
}


export class Demo1Store extends FRefluxStore&lt;Demo1State&gt; {
	_state: Demo1State = new Demo1State();

	constructor(actions: FRefluxActions&lt;any&gt;[]) {
		super(actions);
	}

	getState(): Demo1State {
		return this._state;
	}
}
</code></pre>
<h4>Create Main View</h4>
<pre><code>export interface MobileDemo1Props extends React.Props&lt;MobileDemo1&gt; {
	history: any;
}

export class MobileDemo1 extends FRefluxStoreComponent&lt;MobileDemo1Props, Demo1State&gt; {
	constructor() {
		this.name = &quot;MobileDemo1&quot;;
		super(_app1Store);
	}

	componentWillMount() {
	}

	componentWillUnmount() {
	}

	componentDidMount() {
		super.componentDidMount();
	}

	navigate() {
		console.log(this.props);
		this.props.history.pushState(null, &quot;/&quot;);
		//this.props.history.replaceState(null, &quot;/&quot;);
	}

	render() {
		return (
			&lt;div&gt;React-Router Demo1
				&lt;Link to='Panel1'&gt;Panel1&lt;/Link&gt;
				&lt;Link to='Panel2'&gt;&lt;button className=&quot;btn btn-success&quot;&gt;Panel2&lt;/button&gt;&lt;/Link&gt;
				&lt;button onClick={this.navigate.bind(this)}&gt;TEST&lt;/button&gt;
				{this.props.children}
			&lt;/div&gt;
		);
	}
}
</code></pre>
<h4>Create Panel1 View</h4>
<pre><code>interface Panel1Props extends React.Props&lt;Panel1&gt; {
}


class Panel1 extends FRefluxReducerComponent&lt;Panel1Props, Demo1State&gt; {
	constructor() {
		super();
	}

	getStateFromStore(state: Demo1State): Demo1State {
		return state;
	}

	render() {
		return (
			&lt;div&gt;
				Hello Panel-1
			&lt;/div&gt;
		);
	}
}
</code></pre>
<h3>Render</h3>
<pre><code>import * as Router from 'react-router';
import { Route, IndexRoute, Link } from 'react-router';

var routeMap = (
		&lt;Route path=&quot;/&quot; component={MobileDemo1}&gt;
				&lt;IndexRoute component={Panel1}/&gt;
				&lt;Route path=&quot;Panel1&quot; component={Panel1}/&gt;
        &lt;Route path=&quot;Panel2&quot; component={Panel2}/&gt;
        &lt;Route path=&quot;*&quot; component={NotFoundPage} /&gt;
    &lt;/Route&gt;
);

ReactDOM.render(
	&lt;Router.Router history={Router.browserHistory}&gt;
		{routeMap}
	&lt;/Router.Router&gt;, 
	document.getElementById('app1')
);
</code></pre>
<h3>Main.js</h3>
<pre><code>(function(){
	var baseUrl = &quot;/js/Samples/ReactRouterDemo1/&quot;;

	require.config({
		paths: {
			&quot;App&quot;: baseUrl + &quot;App&quot;,
		}
	});
})();

define([&quot;require&quot;, &quot;exports&quot;, 'App'], function (require, exports, app) {
});
</code></pre>
<h3>HTML</h3>
<pre><code>&lt;html&gt;
&lt;head&gt;
	&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot; /&gt;
	&lt;title&gt;React Router Demo1&lt;/title&gt;
	&lt;script src=&quot;~/js/requirejs-config.js&quot;&gt;&lt;/script&gt;
	&lt;script src=&quot;~/Scripts/require.js&quot; data-main=&quot;/js/Samples/ReactRouterDemo1/Main.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;div id=&quot;app1&quot;&gt;
	&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

